<!DOCTYPE html>
<!-- _layouts/distill.html -->
<html>
  <head>        
    <!-- Metadata, OpenGraph and Schema.org -->
    

    <!-- Standard metadata -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Humberto  González Ramírez | Lluvias Mexico City</title>
    <meta name="author" content="Humberto  González Ramírez" />
    <meta name="description" content="Rainfall interpolation and visualization for the Mexico City Water Management System" />
    <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website" />


    <!-- Bootstrap & MDB -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous" />

    <!-- Fonts & Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons">

    <!-- Code Syntax Highlighting -->
    <link rel="stylesheet" href="https://gitcdn.link/repo/jwarby/jekyll-pygments-themes/master/github.css" />

    <!-- Styles -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>📊</text></svg>">
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="canonical" href="https://humbertog.github.io/projects/project_lluvias/">

    <!-- MathJax -->
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        tags: 'ams'
      }
    };
  </script>
  <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script>
  <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>

    <!-- Distill js -->
    <script src="/assets/js/distillpub/template.v2.js"></script>
    <script src="/assets/js/distillpub/transforms.v2.js"></script>
    
  </head>

  <d-front-matter>
    <script async type="text/json">{
      "title": "Lluvias Mexico City",
      "description": "Rainfall interpolation and visualization for the Mexico City Water Management System",
      "published": "October 1, 2021",
      "authors": [
        {
          "author": "Humberto González R.",
          "authorURL": "",
          "affiliations": [
            {
              "name": "_",
              "url": ""
            }
          ]
        }
        
      ],
      "katex": {
        "delimiters": [
          {
            "left": "$",
            "right": "$",
            "display": false
          },
          {
            "left": "$$",
            "right": "$$",
            "display": true
          }
        ]
      }
    }</script>
  </d-front-matter>

  <body class="fixed-top-nav">

    <!-- Header -->
    <header>

      <!-- Nav Bar -->
      <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top">
        <div class="container">
          <a class="navbar-brand title font-weight-lighter" href="https://humbertog.github.io/"><span class="font-weight-bold">Humberto</span>   González Ramírez</a>
          <!-- Navbar Toggle -->
          <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar top-bar"></span>
            <span class="icon-bar middle-bar"></span>
            <span class="icon-bar bottom-bar"></span>
          </button>

          <div class="collapse navbar-collapse text-right" id="navbarNav">
            <ul class="navbar-nav ml-auto flex-nowrap">

              <!-- About -->
              <li class="nav-item ">
                <a class="nav-link" href="/">about</a>
              </li>
              

              <!-- Other pages -->
              

              <li class="nav-item ">
                <a class="nav-link" href="/cv/">cv</a>
              </li>
              

              <li class="nav-item ">
                <a class="nav-link" href="/projects/">projects</a>
              </li>
              <li class="nav-item dropdown ">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">publications</a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                  <a class="dropdown-item" href="/publications_sci/">scientific articles</a>
                  <div class="dropdown-divider"></div>
                  <a class="dropdown-item" href="/publications_rep/">opinion &amp; vulgarisation</a>
                </div>
              </li>
<!-- PDMX -->
              <li class="nav-item">
                <a class="nav-link" href="https://puntodecimal.mx/author/humberto-gora" target="_blank" rel="noopener noreferrer">blog:PuntoDecimalMX
                </a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <!-- Content -->
    <div class="post distill">

      <d-title>
        <h1>Lluvias Mexico City</h1>
        <p>Rainfall interpolation and visualization for the Mexico City Water Management System</p>
      </d-title>

      <d-byline></d-byline>

      <d-article>
        <d-contents>
          <nav class="l-text figcaption">
          <h3>Contents</h3>
            <div><a href="#introduction">Introduction</a></div>
            <div><a href="#resuls">Resuls</a></div>
            <div><a href="#conclusions">Conclusions</a></div>
            
          </nav>
        </d-contents>

        <p><strong>Keywords:</strong> kriging, R, GIS, rainfall, CDMX</p>

<h2 id="introduction">Introduction</h2>

<h4 id="what">What</h4>
<p>The Mexico City Water Management System (SACMEX) has a real-time precipitation monitoring system, which is responsible for measuring and recording the quantity of rainfall in Mexico City. The SACMEX seeks to automatize the reporting of rainfall for the entire city as well as predefined areas, such as municipalities and high flood risk areas.</p>

<h4 id="problem">Problem</h4>
<p>Currently, SACMEX produces a report using two methodologies: (i) ordinary <code class="language-plaintext highlighter-rouge">kriging</code> to obtain isohyets and produce rainfall visualizations; (ii) the <code class="language-plaintext highlighter-rouge">Thiessen polygon method</code> to obtain the average precipitation (mm) calculated for the entire city and for the municipalities. The use of two methodologies can lead to inconsistencies in the reporting. Moreover, the Thiessen polygon method makes it difficult to automatize the reporting.</p>

<h4 id="proposed-solution">Proposed solution</h4>
<p>An <code class="language-plaintext highlighter-rouge">automatic report generation tool, based on kriging</code> <d-cite key="PardoIguzquiza1998"></d-cite><d-cite key="Mair2011"></d-cite><d-cite key="Walter2000"></d-cite>, which allows to easily compute the rainfall statistics in predefined areas, such as the municipalities and zones with high risk of flooding.</p>
<div class="row l-body-outset">
    <div class="col-sm mt-3 mt-md-0">
        <figure>

  <picture>
    <source media="(max-width: 480px)" srcset="/assets/img/thiessen_polig1-480.webp"></source>
    <source media="(max-width: 800px)" srcset="/assets/img/thiessen_polig1-800.webp"></source>
    <source media="(max-width: 1400px)" srcset="/assets/img/thiessen_polig1-1400.webp"></source>
    <!-- Fallback to the original file -->
    <img class="img-fluid rounded z-depth-1" src="/assets/img/thiessen_polig1.png" title="example image">

  </picture>

</figure>

    </div>
    <div class="col-sm mt-3 mt-md-0">
        <figure>

  <picture>
    <source media="(max-width: 480px)" srcset="/assets/img/kriging_polig1-480.webp"></source>
    <source media="(max-width: 800px)" srcset="/assets/img/kriging_polig1-800.webp"></source>
    <source media="(max-width: 1400px)" srcset="/assets/img/kriging_polig1-1400.webp"></source>
    <!-- Fallback to the original file -->
    <img class="img-fluid rounded z-depth-1" src="/assets/img/kriging_polig1.png" title="example image">

  </picture>

</figure>

    </div>
</div>
<div class="caption">
    Thiessen (left) vs kriging (right) in computing the rainfall in a zone.
</div>

<h2 id="results">Results</h2>
<p>The solution is a highly customizable script, programmed in <a href="https://www.r-project.org" target="_blank" rel="noopener noreferrer">R</a>, that is called from the console and takes as inputs (i) a file with the rainfall measures in location and (ii) the predefined GIS polygons of the entire city, the municipalities and the areas of interest. The outputs are a report (.pdf), a file (.csv) with the statistics computed for each area, a Google Earth (.kml) file to use in the web Supervisory Control and Data Acquisition (SCADA) system.</p>

<div class="row l-body-outset">
    <div class="col-sm mt-3 mt-md-0">
        <figure>

  <picture>
    <source media="(max-width: 480px)" srcset="/assets/img/lluvias_reporte_dia-480.webp"></source>
    <source media="(max-width: 800px)" srcset="/assets/img/lluvias_reporte_dia-800.webp"></source>
    <source media="(max-width: 1400px)" srcset="/assets/img/lluvias_reporte_dia-1400.webp"></source>
    <!-- Fallback to the original file -->
    <img class="img-fluid rounded z-depth-1" src="/assets/img/lluvias_reporte_dia.png" title="example image">

  </picture>

</figure>

    </div>
</div>
<div class="caption">
    Example of a daily report. Cumulative rainfall from 00:00 to the time of the reporting.
</div>

<div class="row l-body-outset">
    <div class="col-sm mt-3 mt-md-0">
        <figure>

  <picture>
    <source media="(max-width: 480px)" srcset="/assets/img/lluvias_reporte_mes-480.webp"></source>
    <source media="(max-width: 800px)" srcset="/assets/img/lluvias_reporte_mes-800.webp"></source>
    <source media="(max-width: 1400px)" srcset="/assets/img/lluvias_reporte_mes-1400.webp"></source>
    <!-- Fallback to the original file -->
    <img class="img-fluid rounded z-depth-1" src="/assets/img/lluvias_reporte_mes.png" title="example image">

  </picture>

</figure>

    </div>
</div>
<div class="caption">
    Example of a monthly report. Cumulative rainfall for the entire month.
</div>

<h2 id="conclusions">Conclusions</h2>

<p>An important difference between the two methods is that kriging assumes a continuous behavior of the phenomenon, while Thiessen assumes a discrete behavior, derived from the partition of space into large-area polygons. Thiessen’s method assumes a single value within the polygon and equal to the value observed at the monitoring station. On the other hand, the kriging method takes into account all the stations within a circumference to estimate the value of any point on the map. This implies that the kriging method has a higher resolution and greater flexibility to capture rainfall patterns. Other advantages of the kriging method over the Thiessen method are:</p>
<ul>
  <li>the isohyets cannot be obtained from the estimates obtained by the Thiessen method;</li>
  <li>two adjacent Thiessen polygons can show very large jumps in their values;</li>
  <li>zones with few stations imply larger polygons (greater weights) and, therefore, their influence on the calculation of total precipitation is greater;</li>
  <li>Thiessen polygons need to be recalculated each time a station is added or removed from the analysis. Likewise, the weights of the polygons, both within the city and in the delegations, have to be recalculated, for which this method is impractical.</li>
</ul>


      </d-article>

      <d-appendix>
        <d-footnote-list></d-footnote-list>
        <d-citation-list></d-citation-list>
      </d-appendix>

    </div>

    <!-- Footer -->    
    <footer class="fixed-bottom">
      <div class="container mt-0">
        © Copyright 2022 Humberto  González Ramírez. Powered by <a href="http://jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" target="_blank" rel="noopener noreferrer">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer">GitHub Pages</a>.
Last updated: February 08, 2022.
      </div>
    </footer>

  </body>

  <d-bibliography src="/assets/bibliography/lluvias.bib">
  </d-bibliography>

  <!-- jQuery -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

  <!-- Bootsrap & MDB scripts -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.2/dist/umd/popper.min.js" integrity="sha256-l/1pMF/+J4TThfgARS6KwWrk/egwuVvhRzfLAMQ6Ds4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js" integrity="sha256-SyTu6CwrfOhaznYZPoolVw2rxoY7lKYKQvqbtqN93HI=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script>

  <script src="/assets/js/distillpub/overrides.js"></script>

</html>
